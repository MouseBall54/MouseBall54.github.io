typora-root-url: ../
layout: single
title: >
    Git에서 커밋을 되돌리는 방법 (git revert)
seo_title: >
    Git에서 커밋을 되돌리는 방법 (git revert)

lang: ko
translation_id: git-reverting-a-commit
header:
   teaser: /images/header_images/overlay_image_git.png
   overlay_image: /images/header_images/overlay_image_git.png
   overlay_filter: 0.5
excerpt: >
    Git에서 특정 커밋의 변경 사항을 안전하게 되돌려야 할 때가 있습니다. 'git revert'는 기존 커밋을 삭제하지 않고 변경 내용을 취소하는 새로운 커밋을 생성하여 이 문제를 해결합니다. 이 글에서는 git revert의 사용법과 장점을 알아봅니다.
seo_description: >
    Git에서 특정 커밋의 변경 사항을 안전하게 되돌려야 할 때가 있습니다. 'git revert'는 기존 커밋을 삭제하지 않고 변경 내용을 취소하는 새로운 커밋을 생성하여 이 문제를 해결합니다. 이 글에서는 git revert의 사용법과 장점을 알아봅니다.
categories:
  - ko_Troubleshooting
tags:
  - Git
  - Revert
  - Commit
  - VersionControl
---

## 문제 상황

Git으로 프로젝트를 관리하다 보면, 특정 커밋에 포함된 변경 사항이 문제를 일으키거나 더 이상 필요하지 않게 되는 경우가 있습니다.
예를 들어, 버그를 유발하는 커밋을 원격 저장소에 이미 푸시했을 수 있습니다.
이때 프로젝트 히스토리를 강제로 변경하는 `git reset`을 사용하면, 다른 팀원들과의 협업 과정에서 심각한 충돌이 발생할 수 있습니다.
안전하게 특정 커밋의 변경 내용만 되돌리고 싶을 때 어떻게 해야 할까요?

## 원인 분석

이 문제의 핵심은 **공유된 커밋 히스토리를 안전하게 수정하는 방법**에 있습니다.
`git reset`은 커밋을 아예 삭제하고 히스토리를 다시 쓰기 때문에, 다른 팀원이 삭제된 커밋을 기반으로 작업하고 있었다면 그들의 작업 기반이 사라져 버립니다.
이는 원격 저장소와 로컬 저장소 간의 히스토리를 불일치시켜 복잡한 문제를 야기합니다.

따라서, 이미 공유된(pushed) 커밋을 되돌릴 때는 히스토리를 삭제하는 대신, **변경 사항을 취소하는 새로운 커밋을 추가**하는 방식이 필요합니다.
이 역할을 하는 명령어가 바로 `git revert`입니다.

## 해결 방법

`git revert`는 지정된 커밋의 변경 내용을 정확히 반대로 적용하는 새로운 커밋을 생성합니다.
예를 들어, 특정 커밋이 파일에 한 줄을 추가했다면, `revert` 커밋은 그 줄을 삭제합니다.
이를 통해 기존 히스토리를 그대로 유지하면서 원하는 변경 사항만 안전하게 되돌릴 수 있습니다.

### 1. 되돌리고 싶은 커밋 확인

먼저 `git log` 명령어를 사용하여 되돌리고자 하는 커밋의 해시(hash) 값을 확인합니다.

```bash
git log --oneline

# 출력 예시
# a1b2c3d (HEAD -> main) Feat: 새로운 기능 추가
# e4f5g6h Bug: 로그인 로직 수정 (이 커밋을 되돌리고 싶음)
# i7j8k9l Docs: 문서 업데이트
```

여기서는 `e4f5g6h` 커밋을 되돌리고 싶다고 가정하겠습니다.

### 2. `git revert` 실행

터미널에 다음 명령어를 입력합니다.

```bash
git revert e4f5g6h
```

이 명령을 실행하면, Git은 다음 두 가지 작업을 수행합니다.

1.  `e4f5g6h` 커밋에서 이루어진 모든 변경 사항을 되돌리는 내용을 작업 디렉터리에 적용합니다.
2.  새로운 커밋 메시지를 작성할 수 있도록 기본 텍스트 편집기가 열립니다. 기본 메시지는 보통 "Revert \"Bug: 로그인 로직 수정\""과 같이 표시됩니다.

커밋 메시지를 저장하고 편집기를 닫으면, 되돌리기 작업이 완료된 새로운 커밋이 생성됩니다.

```bash
git log --oneline

# 출력 예시
# cba321d (HEAD -> main) Revert "Bug: 로그인 로직 수정"
# a1b2c3d Feat: 새로운 기능 추가
# e4f5g6h Bug: 로그인 로직 수정
# i7j8k9l Docs: 문서 업데이트
```

이제 `cba321d`라는 새로운 커밋이 추가되었고, `e4f5g6h` 커밋의 내용은 취소되었습니다.

### 3. `--no-edit` 옵션

커밋 메시지를 수정할 필요 없이 기본 메시지를 그대로 사용하고 싶다면 `--no-edit` 옵션을 추가할 수 있습니다.

```bash
git revert e4f5g6h --no-edit
```

### 4. 여러 커밋 되돌리기

여러 개의 커밋을 한 번에 되돌릴 수도 있습니다. 단, 순서에 주의해야 합니다.

```bash
# 오래된 커밋부터 순서대로 되돌리기
git revert <오래된-커밋-해시> <최신-커밋-해시>
```

### 5. 원격 저장소에 푸시

로컬에서 되돌리기 커밋을 성공적으로 만들었다면, 이제 다른 팀원들과 변경 사항을 공유하기 위해 원격 저장소에 푸시합니다.

```bash
git push origin main
```

`git revert`는 새로운 커밋을 추가하는 방식이므로, `git push`가 자연스럽게 동작하며 충돌을 일으키지 않습니다.

## `git revert` vs. `git reset`

| 특징 | `git revert` | `git reset` |
| --- | --- | --- |
| **히스토리** | 기존 히스토리를 보존하고, 되돌리는 새 커밋을 추가 | 기존 히스토리를 삭제하고 변경 |
| **안전성** | 공유된 브랜치(pushed)에 사용하기에 안전 | 공유된 브랜치에 사용하면 매우 위험 |
| **사용 사례** | 공개된 커밋, 협업 프로젝트의 버그 수정 | 비공개 로컬 브랜치의 커밋 정리 |

## 결론

`git revert`는 이미 원격 저장소에 푸시된 커밋의 변경 사항을 안전하게 되돌릴 수 있는 강력하고 필수적인 명령어입니다.
프로젝트의 커밋 히스토리를 깨뜨리지 않고 변경 내용을 취소함으로써, 팀원들과의 협업을 원활하게 유지할 수 있습니다.
실수로 올린 커밋이 있다면 `git reset`으로 히스토리를 지우려 하지 말고, `git revert`를 사용하여 안전하게 되돌리는 습관을 들이는 것이 좋습니다.
